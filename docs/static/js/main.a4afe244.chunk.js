(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,n){e.exports=n(46)},34:function(e,t,n){},36:function(e,t,n){},44:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(25),s=n.n(c),i=(n(34),n(6)),o=n(7),u=n(17),l=n(14),d=n(16),f=(n(36),n(15)),p=n(5),h=n.n(p),v=n(22),k=n(8),m=n(28),b=n(27),g=n.n(b),O=n(4),y=n(18),j=function e(t,n,a,r){Object(i.a)(this,e),this.id=t,this.description=n,this.completed=a,this.assigneeId=r},w=function e(t,n){Object(i.a)(this,e),this.id=t,this.name=n},E=function(){return 4e3*Math.random()},x=function(e){return new Promise(function(t){return setTimeout(function(){return t()},e)})},D=function(e){return console.log("API call was made to endpoint: [".concat(e,"]"))},T=function(e){return D("GET: ".concat(e))},S=function(e,t){return D("POST: ".concat(e)+(t?", payload:".concat(JSON.stringify(t,null,2)):""))},I=[new w(111,"Julie"),new w(222,"Hank"),new w(333,"Al")],C=1,A=[new j(0,"Install a monitor arm",!1,111),new j(1,"Move the desk to the new location",!1,111)],N=new(function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,[{key:"tickets",value:function(e){return x(E()).then(function(){var t;if(T("tickets/".concat(e||"")),!(t=e?A.filter(function(t){return-1!==t.description.indexOf(e)}):A))throw new Error("Cannot find ticket");return t})}},{key:"ticket",value:function(e){return x(E()).then(function(){T("ticket/".concat(e));var t=A.filter(function(t){return t.id===+e})[0];if(!t)throw new Error("Cannot find ticket ".concat(+e));return t})}},{key:"newTicket",value:function(e){return x(E()).then(function(){if(S("newTicket",e),!e.description)throw new Error("Description is a required field");var t=new j(++C,e.description,!1,null);return A.push(t),t})}},{key:"assign",value:function(e,t){return x(E()).then(function(){S("assign",{ticketId:e,assigneeId:t});var n=A.filter(function(t){return t.id===e})[0],a=I.filter(function(e){return e.id===t})[0];if(!n)throw new Error("Cannot find ticket ".concat(e));if(!a)throw new Error("Cannot find user ".concat(t));return n.assigneeId=t,n})}},{key:"complete",value:function(e,t){return x(E()).then(function(){S("complete",{ticketId:e,completed:t});var n=A.filter(function(t){return t.id===e})[0];if(!n)throw new Error("Cannot find ticket ".concat(e));return n.completed=t,n})}},{key:"users",value:function(){return x(E()).then(function(){return T("users"),I})}},{key:"user",value:function(e){return x(E()).then(function(){T("users/".concat(e));var t=I.filter(function(t){return t.id===+e})[0];if(!t)throw new Error("Cannot find user ".concat(+e));return t})}}]),e}()),_=h.a.mark(B),L=h.a.mark(W),G=h.a.mark(q),U=h.a.mark($),H="TASK_FETCH",K="TASK_LOADING_STATUS_CHANGE",F="TASK_FILL",J="TASK_ADD",M="ASSIGN",P="TASK_COMPLETE",R=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,null,[{key:"reducer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tasks:[],loading:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K:return Object(y.a)({},e,{loading:t.payload.loading});case F:return{tasks:t.payload.tasks,loading:!1}}return e}},{key:"fetch",value:function(){return{type:H}}},{key:"loading",value:function(e){return{type:K,payload:{loading:e}}}},{key:"add",value:function(e){if("string"===typeof e)return{type:J,payload:e};console.log("Description must be string")}},{key:"complete",value:function(e,t){if("number"===typeof e)return{type:P,payload:{id:e,completed:t}};console.log("Task ID must be a number")}},{key:"fill",value:function(e){return{type:F,payload:{tasks:e}}}},{key:"assign",value:function(e,t){return{type:M,payload:{ticketId:e,assigneeId:t}}}}]),e}();function B(){var e;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.c)(R.loading(!0));case 2:return t.next=4,Object(O.b)(N.tickets);case 4:return e=t.sent,t.next=7,console.log(e);case 7:return t.next=9,Object(O.c)(R.fill(e));case 9:case"end":return t.stop()}},_,this)}function W(e){return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.c)(R.loading(!0));case 2:return t.next=4,Object(O.b)(N.newTicket,{description:e.payload});case 4:return t.next=6,Object(O.c)(R.fetch());case 6:case"end":return t.stop()}},L,this)}function q(e){return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.c)(R.loading(!0));case 2:return t.prev=2,t.next=5,Object(O.b)(N.assign,e.payload.ticketId,e.payload.assigneeId);case 5:return t.next=7,Object(O.c)(R.fetch());case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(2),t.next=13,Object(O.c)(console.log(t.t0));case 13:case"end":return t.stop()}},G,this,[[2,9]])}function $(e){return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.c)(R.loading(!0));case 2:return t.prev=2,t.next=5,Object(O.b)(N.complete,e.payload.id,e.payload.completed);case 5:return t.next=7,Object(O.c)(R.fetch());case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(2),t.next=13,Object(O.c)(console.log(t.t0));case 13:case"end":return t.stop()}},U,this,[[2,9]])}R.sagas=[Object(O.d)(H,B),Object(O.d)(J,W),Object(O.d)(M,q),Object(O.d)(P,$)];var z=h.a.mark(Z),Q="USERS_FETCH",V="USERS_LOADING_STATUS_CHANGE",X="USERS_FILL",Y=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,null,[{key:"reducer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{users:{},loading:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return Object(y.a)({},e,{loading:t.payload.loading});case X:var n={};return t.payload.users.map(function(e){return n[e.id]=e}),{users:n,loading:!1}}return e}},{key:"fetch",value:function(){return{type:Q}}},{key:"loading",value:function(e){return{type:V,payload:{loading:e}}}},{key:"fill",value:function(e){return{type:X,payload:{users:e}}}}]),e}();function Z(){var e;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.c)(Y.loading(!0));case 2:return t.next=4,Object(O.b)(N.users);case 4:return e=t.sent,t.next=7,Object(O.c)(Y.fill(e));case 7:case"end":return t.stop()}},z,this)}Y.sagas=[Object(O.d)(Q,Z)];var ee=Object(k.c)({tasksData:R.reducer,usersData:Y.reducer}),te=h.a.mark(se),ne=g.a,ae=Object(m.a)(),re=Object(k.a)(ae,ne),ce=Object(k.e)(ee,re);function se(){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)([].concat(Object(v.a)(R.sagas),Object(v.a)(Y.sagas)));case 2:case"end":return e.stop()}},te,this)}ae.run(se);var ie=n(9),oe=(n(44),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={nextTask:""},n.handleChange=n.handleChange.bind(Object(ie.a)(Object(ie.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(ie.a)(Object(ie.a)(n))),n}return Object(d.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){this.setState({nextTask:e.target.value})}},{key:"handleSubmit",value:function(e){this.props.dispatch(R.add(this.state.nextTask)),e.preventDefault(),this.setState({nextTask:""})}},{key:"fetchData",value:function(){this.props.dispatch(R.fetch()),this.props.dispatch(Y.fetch())}},{key:"complete",value:function(e){var t=!this.props.tasksData.tasks[e].completed;this.props.dispatch(R.complete(e,t))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",null,"Test Task of Daria Guketleva. TODO list"),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"titles"},r.a.createElement("div",{className:"description"},"Description (click to complete)"),r.a.createElement("div",{className:"assignee"},"Assignee"),r.a.createElement("div",{className:"assign"},"Assign to (click to choose)")),this.props.tasksData.tasks&&this.props.tasksData.tasks.map(function(t){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"description",style:{color:t.completed?"green":"red"},onClick:function(){return e.complete(t.id)}},t.description),r.a.createElement("div",{className:"assignee"},e.props.usersData&&e.props.usersData.users&&t.assigneeId&&e.props.usersData.users[t.assigneeId]&&e.props.usersData.users[t.assigneeId].name),r.a.createElement("div",{className:"assign"},e.renderUserList(t.id)))}),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",value:this.state.nextTask,onChange:this.handleChange}),r.a.createElement("button",null,"add"))),this.props.tasksData.loading&&r.a.createElement("div",{className:"loading"},"LOADING"),r.a.createElement("footer",{className:"card-footer"},"\xa9 Daria Guketleva 2019\u0433."))}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"renderUserList",value:function(e){var t=this,n=[];if(this.props.usersData){var a=function(a){n.push(r.a.createElement("div",{onClick:function(){return t.props.dispatch(R.assign(e,+a))}},t.props.usersData.users[a].name))};for(var c in this.props.usersData.users)a(c)}return n}}]),t}(r.a.Component));var ue=Object(f.b)(function(e){return{tasksData:e.tasksData,usersData:e.usersData}})(oe),le=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(f.a,{store:ce},r.a.createElement(ue,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[29,2,1]]]);
//# sourceMappingURL=main.a4afe244.chunk.js.map